# Gas_Liquid è„šæœ¬æ–‡ä»¶å¤¹

è¿™ä¸ªæ–‡ä»¶å¤¹åŒ…å«äº†ä¸æ°”æ¶²ç›¸å˜ç¨‹åºç›¸å…³çš„ForwardDiffè‡ªåŠ¨å¾®åˆ†è®¡ç®—è„šæœ¬ã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

### 1. `forwarddiff_temperature_scan.jl` - ä¸»è®¡ç®—è„šæœ¬
**åŠŸèƒ½**: ä½¿ç”¨ForwardDiffæ–¹æ³•è¿›è¡ŒPNJLæ¨¡å‹çš„æ¸©åº¦æ‰«æè®¡ç®—

**ä¸»è¦ç‰¹æ€§**:
- ğŸ”¥ **é«˜ç²¾åº¦è‡ªåŠ¨å¾®åˆ†**: ä½¿ç”¨ForwardDiffè®¡ç®—ä¸€åˆ°å››é˜¶å‹å¼ºå¯¼æ•°
- ğŸ“Š **æ¸©åº¦æ‰«æ**: å›ºå®šé‡å­åŒ–å­¦åŠ¿Î¼_Bï¼Œæ‰«ææ¸©åº¦èŒƒå›´20-200 MeV
- ğŸ¯ **çƒ­åŠ›å­¦æ¶¨è½**: è®¡ç®—Îºâ‚ƒ/Îºâ‚å’ŒÎºâ‚„/Îºâ‚‚æ¯”å€¼ï¼Œç”¨äºç›¸å˜ç ”ç©¶
- ğŸ’¾ **æ•°æ®è¾“å‡º**: è‡ªåŠ¨ä¿å­˜å¸¦å…ƒæ•°æ®çš„CSVæ ¼å¼ç»“æœæ–‡ä»¶

**è®¡ç®—å†…å®¹**:
- å‹å¼ºå½’ä¸€åŒ–å€¼ P/Tâ´
- ä¸€é˜¶åˆ°å››é˜¶ç´¯ç§¯é‡ Îºâ‚, Îºâ‚‚, Îºâ‚ƒ, Îºâ‚„
- çƒ­åŠ›å­¦æ¶¨è½æ¯”å€¼ Îºâ‚ƒ/Îºâ‚ å’Œ Îºâ‚„/Îºâ‚‚
- åŒ–å­¦åŠ¿æ¸©åº¦æ¯” Î¼/T

### 2. `plot_temperature_scan.jl` - æ•°æ®å¯è§†åŒ–è„šæœ¬
**åŠŸèƒ½**: è¯»å–æ¸©åº¦æ‰«æç»“æœå¹¶ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨

**ä¸»è¦ç‰¹æ€§**:
- ğŸ“ˆ **æ•°æ®å¯è§†åŒ–**: ç»˜åˆ¶Îºâ‚ƒ/Îºâ‚å’ŒÎºâ‚„/Îºâ‚‚éšæ¸©åº¦çš„å˜åŒ–æ›²çº¿
- ğŸ“‹ **å…ƒæ•°æ®è§£æ**: è‡ªåŠ¨è¯»å–CSVæ–‡ä»¶ä¸­çš„è¿è¡Œå‚æ•°å…ƒæ•°æ®
- ğŸ–¼ï¸ **å›¾åƒä¿å­˜**: ç”Ÿæˆé«˜åˆ†è¾¨ç‡PNGå›¾åƒæ–‡ä»¶
- ğŸ“Š **å¤šå›¾æ¨¡å¼**: æ”¯æŒæ¯”å€¼å›¾å’Œå„ä¸ªÎºå€¼çš„ç‹¬ç«‹å±•ç¤º

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šè¿è¡Œæ¸©åº¦æ‰«æè®¡ç®—
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ
cd D:\Desktop\Julia\Rotation_PNJL
julia --project=. scripts/Gas_Liquid/forwarddiff_temperature_scan.jl
```

**è®¡ç®—å‚æ•°**:
- é‡å­åŒ–å­¦åŠ¿: Î¼_B = 697 MeV (å›ºå®š)
- æ¸©åº¦èŒƒå›´: 20 - 200 MeV
- æ¸©åº¦æ­¥é•¿: 1 MeV
- è¾“å‡ºæ–‡ä»¶: `output/Gas_Liquid/forwarddiff_temperature_scan.csv`

### ç¬¬äºŒæ­¥ï¼šç”Ÿæˆå¯è§†åŒ–å›¾è¡¨
```bash
# ç»˜åˆ¶ç»“æœå›¾è¡¨
julia --project=. scripts/Gas_Liquid/plot_temperature_scan.jl
```

**è¾“å‡ºå›¾åƒ**:
- `output/Gas_Liquid/kappa_ratios_temperature_scan.png` - Îºæ¯”å€¼å›¾
- `output/Gas_Liquid/individual_kappas_temperature_scan.png` - å„Îºå€¼å›¾

## ğŸ“‹ è¯¦ç»†ä½¿ç”¨è¯´æ˜

### `forwarddiff_temperature_scan.jl` ä½¿ç”¨æ–¹æ³•

#### åŸºæœ¬è¿è¡Œ
è„šæœ¬ä½¿ç”¨é¢„è®¾å‚æ•°è¿è¡Œï¼Œæ— éœ€é¢å¤–é…ç½®ï¼š

```julia
# ç›´æ¥è¿è¡Œè„šæœ¬
julia --project=. scripts/Gas_Liquid/forwarddiff_temperature_scan.jl
```

#### å‚æ•°é…ç½®
å¯ä»¥åœ¨è„šæœ¬ä¸­ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š

```julia
# åœ¨è„šæœ¬æœ«å°¾çš„ä¸»ç¨‹åºéƒ¨åˆ†
Î¼_B_fixed = 697.0/hc      # é‡å­åŒ–å­¦åŠ¿ (MeV)
T_min = 20.0/hc           # æœ€å°æ¸©åº¦ (MeV) 
T_max = 200.0/hc          # æœ€å¤§æ¸©åº¦ (MeV)
T_step = 1.0/hc           # æ¸©åº¦æ­¥é•¿ (MeV)
```

#### æ¨¡å‹å‚æ•°
PNJLæ¨¡å‹å‚æ•°è®¾ç½®åœ¨ `forwarddiff_temperature_scan()` å‡½æ•°ä¸­ï¼š

```julia
# æ¨¡å‹å‚æ•°
gsigma = 1.25     # sigmaåœºåˆå€¼
gdelta = 0.01     # deltaåœºåˆå€¼
fs = 17.28476     # sigmaè€¦åˆå¸¸æ•°
fo = 11.66174     # omegaè€¦åˆå¸¸æ•°
fr = 0.89363      # rhoè€¦åˆå¸¸æ•°
fd = 0.0          # deltaè€¦åˆå¸¸æ•°
b = 0.00210       # ä¸‰æ¬¡é¡¹ç³»æ•°
c = -0.00297      # å››æ¬¡é¡¹ç³»æ•°
```

### `plot_temperature_scan.jl` ä½¿ç”¨æ–¹æ³•

#### åŸºæœ¬è¿è¡Œï¼ˆè‡ªåŠ¨æ¨¡å¼ï¼‰
```julia
julia --project=. scripts/Gas_Liquid/plot_temperature_scan.jl
```
è‡ªåŠ¨æŸ¥æ‰¾ `output/Gas_Liquid/forwarddiff_temperature_scan.csv` æ–‡ä»¶å¹¶ç”Ÿæˆå›¾è¡¨ã€‚

#### æŒ‡å®šè¾“å…¥æ–‡ä»¶
```julia
julia --project=. scripts/Gas_Liquid/plot_temperature_scan.jl custom_data.csv
```

#### å‡½æ•°è°ƒç”¨æ–¹å¼
```julia
# åœ¨Julia REPLä¸­ä½¿ç”¨
include("scripts/Gas_Liquid/plot_temperature_scan.jl")

# ç»˜åˆ¶æ¯”å€¼å›¾
p1 = plot_temperature_scan_results("output/Gas_Liquid/forwarddiff_temperature_scan.csv", 
                                   "my_ratios.png")

# ç»˜åˆ¶å„ä¸ªÎºå€¼
p2 = plot_individual_kappas("output/Gas_Liquid/forwarddiff_temperature_scan.csv", 
                            "my_kappas.png")
```

## ğŸ“Š è¾“å‡ºæ–‡ä»¶æ ¼å¼

### CSVæ•°æ®æ–‡ä»¶
**æ–‡ä»¶ä½ç½®**: `output/Gas_Liquid/forwarddiff_temperature_scan.csv`

**å…ƒæ•°æ®å¤´éƒ¨** (ä»¥ # å¼€å¤´çš„æ³¨é‡Šè¡Œ):
```
# ForwardDiff Temperature Scan Results
# Generated on: 2024-01-15T10:30:00.000
# Model Parameters:
# gsigma = 1.25
# gdelta = 0.01
# fs = 17.28476
# fo = 11.66174
# fr = 0.89363
# fd = 0.0
# b = 0.00210
# c = -0.00297
# mu_B = 697.0 MeV
# T_range = 20.0 - 200.0 MeV
# T_step = 1.0 MeV
# nodes = 256
```

**æ•°æ®åˆ—è¯´æ˜**:
| åˆ—å | å•ä½ | è¯´æ˜ |
|------|------|------|
| `T_MeV` | MeV | æ¸©åº¦ |
| `P_T4` | æ— é‡çº² | å½’ä¸€åŒ–å‹å¼º P/Tâ´ |
| `kappa1` | æ— é‡çº² | ä¸€é˜¶ç´¯ç§¯é‡ Îºâ‚ |
| `kappa2` | æ— é‡çº² | äºŒé˜¶ç´¯ç§¯é‡ Îºâ‚‚ |
| `kappa3` | æ— é‡çº² | ä¸‰é˜¶ç´¯ç§¯é‡ Îºâ‚ƒ |
| `kappa4` | æ— é‡çº² | å››é˜¶ç´¯ç§¯é‡ Îºâ‚„ |
| `kappa3_over_kappa1` | æ— é‡çº² | çƒ­åŠ›å­¦æ¶¨è½æ¯”å€¼ Îºâ‚ƒ/Îºâ‚ |
| `kappa4_over_kappa2` | æ— é‡çº² | çƒ­åŠ›å­¦æ¶¨è½æ¯”å€¼ Îºâ‚„/Îºâ‚‚ |
| `mu_over_T` | æ— é‡çº² | åŒ–å­¦åŠ¿æ¸©åº¦æ¯” Î¼_B/T |

### å›¾åƒæ–‡ä»¶
**è¾“å‡ºä½ç½®**: `output/Gas_Liquid/`

1. **`kappa_ratios_temperature_scan.png`**
   - ä¸»è¦ç»“æœå›¾ï¼šÎºâ‚ƒ/Îºâ‚ å’Œ Îºâ‚„/Îºâ‚‚ éšæ¸©åº¦å˜åŒ–
   - åŒ…å«æ°´å¹³å‚è€ƒçº¿ (æ¯”å€¼ = 1)
   - é«˜åˆ†è¾¨ç‡ (300 DPI)

2. **`individual_kappas_temperature_scan.png`**
   - å„ä¸ªÎºå€¼çš„ç‹¬ç«‹å±•ç¤º
   - å¯¹æ•°åæ ‡æ˜¾ç¤º
   - ç”¨äºè¯Šæ–­å’Œè¯¦ç»†åˆ†æ

## âš™ï¸ æŠ€æœ¯ç»†èŠ‚

### ForwardDiffè‡ªåŠ¨å¾®åˆ†
è„šæœ¬ä½¿ç”¨Juliaçš„ForwardDiff.jlåŒ…è¿›è¡Œè‡ªåŠ¨å¾®åˆ†ï¼š

1. **ä¸€é˜¶å¯¼æ•°**: `ForwardDiff.derivative()`
2. **é«˜é˜¶å¯¼æ•°**: é€’å½’åº”ç”¨è‡ªåŠ¨å¾®åˆ†
3. **ç±»å‹å®‰å…¨**: ä½¿ç”¨ç±»å‹æå‡ç¡®ä¿æ•°å€¼ç¨³å®šæ€§
4. **å¢å¼ºå››é˜¶å¯¼æ•°**: ä½¿ç”¨5ç‚¹ä¸­å¿ƒå·®åˆ†æé«˜ç²¾åº¦

### æ•°å€¼æ–¹æ³•ç‰¹ç‚¹
- **çº¦æŸæ–¹ç¨‹æ±‚è§£**: ä½¿ç”¨NLsolve.jlçš„Newtonæ–¹æ³•
- **ç±»å‹ä¿æŠ¤**: åŠ¨æ€ç±»å‹æå‡é¿å…ç±»å‹ä¸åŒ¹é…
- **é”™è¯¯å¤„ç†**: è®¡ç®—å¤±è´¥æ—¶è¿”å›NaNè€Œä¸æ˜¯ä¸­æ–­
- **å†…å­˜ä¼˜åŒ–**: é¢„åˆ†é…ç»“æœæ•°ç»„å‡å°‘å†…å­˜åˆ†é…

### ç‰©ç†æ„ä¹‰
- **Îºâ‚ƒ/Îºâ‚**: åæ˜ é‡å­æ•°æ¶¨è½çš„ååº¦ï¼Œç›¸å˜ä¿¡å·
- **Îºâ‚„/Îºâ‚‚**: åæ˜ é‡å­æ•°æ¶¨è½çš„å³°åº¦ï¼Œä¸´ç•Œç‚¹æ ‡è¯†
- **Î¼_B/T**: åŒ–å­¦åŠ¿æ¸©åº¦æ¯”ï¼Œæ§åˆ¶ç›¸å›¾ä½ç½®

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

**1. åŒ…ä¾èµ–é—®é¢˜**
```julia
# ç¡®ä¿å®‰è£…äº†å¿…è¦çš„åŒ…
using Pkg
Pkg.add(["NLsolve", "ForwardDiff", "CSV", "DataFrames", "Plots"])
```

**2. è¾“å‡ºç›®å½•ä¸å­˜åœ¨**
```bash
# æ‰‹åŠ¨åˆ›å»ºè¾“å‡ºç›®å½•
mkdir -p output/Gas_Liquid
```

**3. è®¡ç®—æ”¶æ•›å¤±è´¥**
- è°ƒæ•´æ¨¡å‹å‚æ•° (gsigma, gdelta)
- å‡å°æ¸©åº¦æ­¥é•¿
- æ£€æŸ¥åŒ–å­¦åŠ¿èŒƒå›´çš„åˆç†æ€§

**4. ç»˜å›¾å¤±è´¥ (SSHç¯å¢ƒ)**
```julia
# ç¡®ä¿ä½¿ç”¨GRåç«¯ä¸”ä¿å­˜æ–‡ä»¶è€Œä¸æ˜¾ç¤º
using Plots
gr()  # è®¾ç½®åç«¯
# è„šæœ¬ä¼šè‡ªåŠ¨ä¿å­˜PNGæ–‡ä»¶
```

**5. å†…å­˜ä¸è¶³**
- å‡å°‘æ¸©åº¦æ‰«æèŒƒå›´
- å¢å¤§æ¸©åº¦æ­¥é•¿
- ç›‘æ§ç³»ç»Ÿå†…å­˜ä½¿ç”¨

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

**1. è®¡ç®—æ€§èƒ½**
- ä½¿ç”¨è¾ƒå°‘çš„ç§¯åˆ†èŠ‚ç‚¹ (å¦‚128è€Œä¸æ˜¯256)
- å¢å¤§æ¸©åº¦æ­¥é•¿å‡å°‘è®¡ç®—ç‚¹æ•°
- åœ¨å¤šæ ¸ç³»ç»Ÿä¸Šå¯è€ƒè™‘å¹¶è¡ŒåŒ–

**2. æ•°æ®ç®¡ç†**
- å®šæœŸæ¸…ç†outputç›®å½•ä¸­çš„æ—§æ–‡ä»¶
- ä½¿ç”¨å‹ç¼©æ ¼å¼ä¿å­˜å¤§æ•°æ®é›†
- å¤‡ä»½é‡è¦çš„è®¡ç®—ç»“æœ

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **ä¸»é¡¹ç›®æ–‡æ¡£**: `../../docs/`
- **æ ¸å¿ƒå‡½æ•°æ–‡æ¡£**: `../../src/Function_Gas_Liquid.jl`
- **æµ‹è¯•æ–‡ä»¶**: `../../test/test_gas_liquid.jl`
- **ä½¿ç”¨æŒ‡å—**: `../../USAGE_GUIDE.md`

## ğŸ¤ è´¡çŒ®æŒ‡å—

å¦‚éœ€ä¿®æ”¹æˆ–æ‰©å±•è¿™äº›è„šæœ¬ï¼š

1. **å¤‡ä»½åŸå§‹æ–‡ä»¶**
2. **æµ‹è¯•ä¿®æ”¹åçš„åŠŸèƒ½**  
3. **æ›´æ–°æ–‡æ¡£å’Œæ³¨é‡Š**
4. **æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†**
5. **ä¿æŒä»£ç é£æ ¼ä¸€è‡´æ€§**

---
**æœ€åæ›´æ–°**: 2025å¹´9æœˆ14æ—¥  
**ç‰ˆæœ¬**: v1.0  
**ç»´æŠ¤è€…**: Rotation_PNJLé¡¹ç›®ç»„
